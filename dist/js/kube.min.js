!function(h){function o(t,e){return new o.prototype.init(t,e)}h.fn.accordion=function(t){return this.each(function(){h.data(this,"accordion",{}),h.data(this,"accordion",o(this,t))})},h.Accordion=o,h.Accordion.NAME="accordion",h.Accordion.VERSION="1.0",h.Accordion.opts={scroll:!1,collapse:!0,toggle:!0,titleClass:".accordion-title",panelClass:".accordion-panel"},o.fn=h.Accordion.prototype={init:function(t,e){this.$element=!1!==t&&h(t),this.loadOptions(e),this.build(),this.opts.collapse?this.closeAll():this.openAll(),this.loadFromHash()},loadOptions:function(t){this.opts=h.extend({},h.extend(!0,{},h.Accordion.opts),this.$element.data(),t)},setCallback:function(t,e,o){var i=h._data(this.$element[0],"events");if(i&&void 0!==i[t]){for(var s=[],n=i[t].length,a=0;a<n;a++){var l=i[t][a].namespace;l!="tools."+h.Accordion.NAME&&l!=h.Accordion.NAME+".tools"||(l=i[t][a].handler,s.push(void 0===o?l.call(this,e):l.call(this,e,o)))}return 1==s.length?s[0]:s}return void 0===o?e:o},getTitles:function(){this.titles=this.$element.find(this.opts.titleClass),this.titles.append(h("<span />").addClass("accordion-toggle")),this.titles.each(function(){var t=h(this);t.attr("rel",t.attr("href"))})},getPanels:function(){this.panels=this.$element.find(this.opts.panelClass)},build:function(){this.getTitles(),this.getPanels(),this.titles.on("click",h.proxy(this.toggle,this))},loadFromHash:function(){""!==top.location.hash&&this.opts.scroll&&0!==this.$element.find("[rel="+top.location.hash+"]").size()&&(this.open(top.location.hash),this.scrollTo(top.location.hash))},toggle:function(t){t.preventDefault(),t.stopPropagation();var e=h(t.target).attr("rel");this.opts.toggle?(t=h(t.target).closest(this.opts.titleClass).hasClass("accordion-title-opened"),this.closeAll(),t||this.open(e)):h("[rel="+e+"]").hasClass("accordion-title-opened")?this.close(e):this.open(e)},open:function(t){this.$title=h("[rel="+t+"]"),this.$panel=h(t),top.location.hash=t,this.setStatus("open"),this.$panel.show(),this.setCallback("opened",this.$title,this.$panel)},close:function(t){this.$title=h("[rel="+t+"]"),this.$panel=h(t),this.setStatus("close"),this.$panel.hide(),this.setCallback("closed",this.$title,this.$panel)},setStatus:function(o){var t={toggle:this.$title.find("span.accordion-toggle"),title:this.$title,panel:this.$panel};h.each(t,function(t,e){"close"==o?e.removeClass("accordion-"+t+"-opened").addClass("accordion-"+t+"-closed"):e.removeClass("accordion-"+t+"-closed").addClass("accordion-"+t+"-opened")})},openAll:function(){this.titles.each(h.proxy(function(t,e){this.open(h(e).attr("rel"))},this))},closeAll:function(){this.titles.each(h.proxy(function(t,e){this.close(h(e).attr("rel"))},this))},scrollTo:function(t){h("html, body").animate({scrollTop:h(t).offset().top-50},500)}},h(window).on("load.tools.accordion",function(){h('[data-tools="accordion"]').accordion()}),o.prototype.init.prototype=o.prototype}(jQuery),function(h){function o(t,e){return new o.prototype.init(t,e)}h.fn.autocomplete=function(t){return this.each(function(){h.data(this,"autocomplete",{}),h.data(this,"autocomplete",o(this,t))})},h.Autocomplete=o,h.Autocomplete.NAME="autocomplete",h.Autocomplete.VERSION="1.0",h.Autocomplete.opts={url:!1,min:2,set:"value"},o.fn=h.Autocomplete.prototype={init:function(t,e){this.$element=!1!==t&&h(t),this.loadOptions(e),this.build()},loadOptions:function(t){this.opts=h.extend({},h.extend(!0,{},h.Autocomplete.opts),this.$element.data(),t)},setCallback:function(t,e,o){var i=h._data(this.$element[0],"events");if(i&&void 0!==i[t]){for(var s=[],n=i[t].length,a=0;a<n;a++){var l=i[t][a].namespace;l!="tools."+h.Autocomplete.NAME&&l!=h.Autocomplete.NAME+".tools"||(l=i[t][a].handler,s.push(void 0===o?l.call(this,e):l.call(this,e,o)))}return 1==s.length?s[0]:s}return void 0===o?e:o},build:function(){this.result=h('<ul class="autocomplete">').hide(),this.pos=this.$element.offset(),this.elementHeight=this.$element.innerHeight(),h("body").append(this.result),this.placement=h(document).height()-(this.pos.top+this.elementHeight)<this.result.height()?"top":"bottom",h(document).on("click",h.proxy(this.hide,this)),this.$element.on("keyup",h.proxy(function(t){this.$element.val().length>=this.opts.min?(this.$element.addClass("autocomplete-in"),this.result.addClass("autocomplete-open"),this.listen(t)):this.hide()},this))},lookup:function(){h.ajax({url:this.opts.url,type:"post",data:this.$element.attr("name")+"="+this.$element.val(),success:h.proxy(function(t){t=h.parseJSON(t);this.result.html(""),h.each(t,h.proxy(function(t,e){var o=h("<li>"),e=h('<a href="#" rel="'+e.id+'">').html(e.value).on("click",h.proxy(this.set,this));o.append(e),this.result.append(o)},this));t="top"===this.placement?this.pos.top-this.result.height()-this.elementHeight:this.pos.top+this.elementHeight;this.result.css({top:t+"px",left:this.pos.left+"px"}),this.result.show(),this.active=!1},this)})},listen:function(t){if(this.$element.hasClass("autocomplete-in"))switch(t.stopPropagation(),t.preventDefault(),t.keyCode){case 40:this.select("next");break;case 38:this.select("prev");break;case 13:this.set();break;case 27:this.hide();break;default:this.lookup()}},select:function(t){var e=this.result.find("a"),o=e.size(),i=this.result.find("a.active");i.removeClass("active");i=("next"===t?i.parent().next():i.parent().prev()).children("a");(i=0===i.size()?"next"===t?e.eq(0):e.eq(o-1):i).addClass("active"),this.active=i},set:function(t){var e=h(this.active);t&&(t.preventDefault(),e=h(t.target));t=e.attr("rel"),e=e.html();"value"==this.opts.set?this.$element.val(e):this.$element.val(t),this.setCallback("set",t,e),this.hide()},hide:function(t){t&&(h(t.target).hasClass("autocomplete-in")||h(t.target).hasClass("autocomplete-open")||h(t.target).parents().hasClass("autocomplete-open"))||(this.$element.removeClass("autocomplete-in"),this.result.removeClass("autocomplete-open"),this.result.hide())}},h(window).on("load.tools.autocomplete",function(){h('[data-tools="autocomplete"]').autocomplete()}),o.prototype.init.prototype=o.prototype}(jQuery),function(i){function o(t,e){return new o.prototype.init(t,e)}i.fn.buttons=function(t){return this.each(function(){i.data(this,"buttons",{}),i.data(this,"buttons",o(this,t))})},i.Buttons=o,i.Buttons.NAME="buttons",i.Buttons.VERSION="1.0",i.Buttons.opts={className:"btn",activeClassName:"btn-active",target:!1,type:"switch"},o.fn=i.Buttons.prototype={init:function(t,e){this.$element=!1!==t&&i(t),this.loadOptions(e),this.buttons=this.getButtons(),this.value=this.getValue(),this.buttons.each(i.proxy(function(t,e){var o=i(e);this.setDefault(o),o.click(i.proxy(function(t){t.preventDefault(),"segmented"===this.opts.type?this.setSegmented(o):"toggle"===this.opts.type?this.setToggle(o):this.setBasic(o)},this))},this))},loadOptions:function(t){this.opts=i.extend({},i.extend(!0,{},i.Buttons.opts),this.$element.data(),t)},getButtons:function(){return"toggle"===this.opts.type?this.$element:this.$element.find("."+this.opts.className)},getValue:function(){return"segmented"===this.opts.type?i(this.opts.target).val().split(","):i(this.opts.target).val()},setDefault:function(t){("segmented"===this.opts.type&&-1!==i.inArray(t.val(),this.value)||"toggle"===this.opts.type&&1===this.value||this.value===t.val())&&this.setActive(t)},setBasic:function(t){this.setInActive(this.buttons),this.setActive(t),i(this.opts.target).val(t.val())},setSegmented:function(t){var e=i(this.opts.target);this.value=e.val().split(","),t.hasClass(this.opts.activeClassName)?(this.setInActive(t),this.value.splice(this.value.indexOf(t.val()),1)):(this.setActive(t),this.value.push(t.val())),e.val(this.value.join(",").replace(/^,/,""))},setToggle:function(t){t.hasClass(this.opts.activeClassName)?(this.setInActive(t),i(this.opts.target).val(0)):(this.setActive(t),i(this.opts.target).val(1))},setActive:function(t){t.addClass(this.opts.activeClassName)},setInActive:function(t){t.removeClass(this.opts.activeClassName)}},i(window).on("load.tools.buttons",function(){i('[data-tools="buttons"]').buttons()}),o.prototype.init.prototype=o.prototype}(jQuery),function(i){function o(t,e){return new o.prototype.init(t,e)}i.fn.checkAll=function(t){return this.each(function(){i.data(this,"checkAll",{}),i.data(this,"checkAll",o(this,t))})},i.CheckAll=o,i.CheckAll.opts={classname:!1,parent:!1,highlight:"highlight",target:!1},o.fn=i.CheckAll.prototype={init:function(t,e){this.$element=!1!==t&&i(t),this.loadOptions(e),this.$elements=i("."+this.opts.classname),this.$target=i(this.opts.target),this.$element.on("click",i.proxy(this.load,this)),this.setter=this.opts.target?this.$target.val().split(","):[],this.$elements.each(i.proxy(this.setOnStart,this))},loadOptions:function(t){this.opts=i.extend({},i.extend(!0,{},i.CheckAll.opts),this.$element.data(),t)},load:function(){this.$element.prop("checked")?(this.$elements.prop("checked",!0),(this.opts.parent||this.opts.target)&&this.$elements.each(i.proxy(function(t,e){e=i(e);this.setHighlight(e),this.setValue(e.val())},this))):(this.$elements.prop("checked",!1),this.opts.parent&&this.$elements.each(i.proxy(this.removeHighlight,this)),this.opts.target&&this.$target.val(""))},setOnStart:function(t,e){var o=i(e);(this.$element.prop("checked")||this.setter&&-1!==i.inArray(o.val(),this.setter))&&(o.prop("checked",!0),this.setHighlight(o)),o.on("click",i.proxy(function(){var t=this.$elements.filter(":checked").size();o.prop("checked")?(this.setValue(o.val()),this.setHighlight(o)):(this.removeValue(o.val()),this.removeHighlight(o));t=t===this.$elements.size();this.$element.prop("checked",t)},this))},setHighlight:function(t){this.opts.parent&&t.closest(this.opts.parent).addClass(this.opts.highlight)},removeHighlight:function(t,e){this.opts.parent&&i(e).closest(this.opts.parent).removeClass(this.opts.highlight)},setValue:function(t){var e,o;this.opts.target&&((o=(e=this.$target.val()).split(",")).push(t),this.$target.val((o=""===e?[t]:o).join(",")))},removeValue:function(t){var e;this.opts.target&&(t=(e=this.$target.val().split(",")).indexOf(t),e.splice(t,1),this.$target.val(e.join(",")))}},i(window).on("load.tools.buttons",function(){i('[data-tools="check-all"]').checkAll()}),o.prototype.init.prototype=o.prototype}(jQuery),function(h){function o(t,e){return new o.prototype.init(t,e)}h.fn.dropdown=function(t){return this.each(function(){h.data(this,"dropdown",{}),h.data(this,"dropdown",o(this,t))})},h.Dropdown=o,h.Dropdown.NAME="dropdown",h.Dropdown.VERSION="1.0",h.Dropdown.opts={target:!1,targetClose:!1,height:!1,width:!1},o.fn=h.Dropdown.prototype={init:function(t,e){this.$element=!1!==t&&h(t),this.loadOptions(e),this.build()},loadOptions:function(t){this.opts=h.extend({},h.extend(!0,{},h.Dropdown.opts),this.$element.data(),t)},setCallback:function(t,e,o){var i=h._data(this.$element[0],"events");if(i&&void 0!==i[t]){for(var s=[],n=i[t].length,a=0;a<n;a++){var l=i[t][a].namespace;l!="tools."+h.Dropdown.NAME&&l!=h.Dropdown.NAME+".tools"||(l=i[t][a].handler,s.push(void 0===o?l.call(this,e):l.call(this,e,o)))}return 1==s.length?s[0]:s}return void 0===o?e:o},build:function(){this.$dropdown=h(this.opts.target),this.$dropdown.hide(),this.$caret=h('<b class="caret"></b>'),this.$element.append(this.$caret),this.setCaretUp(),this.preventBodyScroll(),this.$element.click(h.proxy(this.toggle,this))},setCaretUp:function(){var t=this.$element.offset().top+this.$element.innerHeight()+this.$dropdown.innerHeight();h(document).height()>t||this.$caret.addClass("caret-up")},toggle:function(t){t.preventDefault(),this.$element.hasClass("dropdown-in")?this.hide():this.show()},getPlacement:function(t){return h(document).height()<t?"top":"bottom"},getPosition:function(){return 0!==this.$element.closest(".navigation-fixed").size()?"fixed":"absolute"},setPosition:function(){var t=this.$element.position(),e=this.$element.innerHeight(),o=this.$element.innerWidth(),i=this.$dropdown.innerHeight(),s=this.$dropdown.innerWidth(),n=this.getPosition(),a=this.getPlacement(t.top+i+e),l=0;h(window).width()<t.left+s&&(l=s-o);l=t.left-l,i="bottom"==a?(this.$caret.removeClass("caret-up"),"fixed"==n?e:t.top+e):(this.$caret.addClass("caret-up"),"fixed"==n?i:t.top-i);this.$dropdown.css({position:n,top:i+"px",left:l+"px"})},show:function(){h(".dropdown-in").removeClass("dropdown-in"),h(".dropdown").removeClass("dropdown-open").hide(),this.opts.height&&this.$dropdown.css("min-height",this.opts.height+"px"),this.opts.width&&this.$dropdown.width(this.opts.width),this.setPosition(),this.$dropdown.addClass("dropdown-open").show(),this.$element.addClass("dropdown-in"),h(document).on("scroll.tools.dropdown",h.proxy(this.setPosition,this)),h(window).on("resize.tools.dropdown",h.proxy(this.setPosition,this)),h(document).on("click.tools.dropdown touchstart.tools.dropdown",h.proxy(this.hide,this)),this.opts.targetClose&&h(this.opts.targetClose).on("click.tools.dropdown",h.proxy(function(t){t.preventDefault(),this.hide(!1)},this)),h(document).on("keydown.tools.dropdown",h.proxy(function(t){27===t.which&&this.hide()},this)),this.setCallback("opened",this.$dropdown,this.$element)},preventBodyScroll:function(){this.$dropdown.on("mouseover",function(){h("html").css("overflow","hidden")}),this.$dropdown.on("mouseout",function(){h("html").css("overflow","")})},hide:function(t){if(t){t=t.originalEvent||t;t=h(t.target);if(t.hasClass("caret")||t.hasClass("dropdown-in")||0!==t.closest(".dropdown-open").size())return}this.$dropdown.removeClass("dropdown-open").hide(),this.$element.removeClass("dropdown-in"),h(document).off(".tools.dropdown"),h(window).off(".tools.dropdown"),this.setCallback("closed",this.$dropdown,this.$element)}},h(window).on("load.tools.dropdown",function(){h('[data-tools="dropdown"]').dropdown()}),o.prototype.init.prototype=o.prototype}(jQuery),function(h){function o(t,e){return new o.prototype.init(t,e)}h.fn.filterbox=function(t){return this.each(function(){h.data(this,"filterbox",{}),h.data(this,"filterbox",o(this,t))})},h.Filterbox=o,h.Filterbox.NAME="filterbox",h.Filterbox.VERSION="1.0",h.Filterbox.opts={placeholder:!1},o.fn=h.Filterbox.prototype={init:function(t,e){this.$element=!1!==t&&h(t),this.loadOptions(e),this.build()},loadOptions:function(t){this.opts=h.extend({},h.extend(!0,{},h.Filterbox.opts),this.$element.data(),t)},setCallback:function(t,e,o){var i=h._data(this.$element[0],"events");if(i&&void 0!==i[t]){for(var s=[],n=i[t].length,a=0;a<n;a++){var l=i[t][a].namespace;l!="tools."+h.Filterbox.NAME&&l!=h.Filterbox.NAME+".tools"||(l=i[t][a].handler,s.push(void 0===o?l.call(this,e):l.call(this,e,o)))}return 1==s.length?s[0]:s}return void 0===o?e:o},build:function(){this.$sourceBox=h('<div class="filterbox" />'),this.$sourceSelect=h('<span class="filterbox-toggle" />'),this.$sourceLayer=h('<ul class="filterbox-list hide" />'),this.$source=h('<input type="text" id="'+this.$element.attr("id")+'-input" class="'+this.$element.attr("class")+'" />'),this.$sourceBox.append(this.$source),this.$sourceBox.append(this.$sourceSelect),this.$sourceBox.append(this.$sourceLayer),this.setPlaceholder(),this.$element.hide().after(this.$sourceBox),this.$element.find("option").each(h.proxy(this.buildListItemsFromOptions,this)),this.$source.on("keyup",h.proxy(this.clearSelected,this)),this.$sourceSelect.on("click",h.proxy(this.load,this)),this.preventBodyScroll()},load:function(t){var n;t.preventDefault(),this.$sourceLayer.hasClass("open")?this.close():(t=this.$element.val(),this.$sourceLayer.addClass("open").show(),n=this.$sourceLayer.find("li").removeClass("active"),this.setSelectedItem(n,t),h(document).on("click.tools.filterbox",h.proxy(this.close,this)),h(document).on("keydown.tools.filterbox",h.proxy(function(t){var e,o,i,s=t.which;38===s?(t.preventDefault(),(o=n.hasClass("active")?((e=n.filter("li.active")).removeClass("active"),0!==(i=e.prev()).size()?i:n.last()):n.last()).addClass("active"),this.setScrollTop(o)):40===s?(t.preventDefault(),(o=n.hasClass("active")?((e=n.filter("li.active")).removeClass("active"),0!==(i=e.next()).size()?i:n.first()):n.first()).addClass("active"),this.setScrollTop(o)):13===s?n.hasClass("active")&&(e=n.filter("li.active"),this.onItemClick(t,e)):27===s&&this.close()},this)))},clearSelected:function(){0===this.$source.val().length&&this.$element.val(0)},setSelectedItem:function(t,e){if(0===(o=t.filter("[rel="+e+"]")).size()){var o=!1,i=this.$source.val();if(h.each(t,function(t,e){e=h(e);e.text()==i&&(o=e)}),!1===o)return}o.addClass("active"),this.setScrollTop(o)},setScrollTop:function(t){this.$sourceLayer.scrollTop(this.$sourceLayer.scrollTop()+t.position().top-40)},buildListItemsFromOptions:function(t,e){var o=h(e),i=o.val();0!==i&&((e=h("<li />")).attr("rel",i).text(o.html()),e.on("click",h.proxy(this.onItemClick,this)),this.$sourceLayer.append(e))},onItemClick:function(t,e){t.preventDefault();e=h(e||t.target),t=e.attr("rel"),e=e.text();this.$source.val(e),this.$element.val(t),this.close(),this.setCallback("select",{id:t,value:e})},preventBodyScroll:function(){this.$sourceLayer.on("mouseover",function(){h("html").css("overflow","hidden")}),this.$sourceLayer.on("mouseout",function(){h("html").css("overflow","")})},setPlaceholder:function(){this.opts.placeholder&&this.$source.attr("placeholder",this.opts.placeholder)},close:function(t){t&&(h(t.target).hasClass("filterbox-toggle")||1==h(t.target).closest("div.filterbox").size())||(this.$sourceLayer.removeClass("open").hide(),h(document).off(".tools.filterbox"))}},h(window).on("load.tools.filterbox",function(){h('[data-tools="filterbox"]').filterbox()}),o.prototype.init.prototype=o.prototype}(jQuery),function(h){function o(t,e){return new o.prototype.init(t,e)}h.fn.infinityScroll=function(t){return this.each(function(){h.data(this,"infinity-scroll",{}),h.data(this,"infinity-scroll",o(this,t))})},h.InfinityScroll=o,h.InfinityScroll.NAME="infinity-scroll",h.InfinityScroll.VERSION="1.0",h.InfinityScroll.opts={url:!1,offset:0,limit:20,tolerance:50,pagination:!1},o.fn=h.InfinityScroll.prototype={init:function(t,e){this.$element=!1!==t&&h(t),this.loadOptions(e),this.hidePagination(),this.build()},loadOptions:function(t){this.opts=h.extend({},h.extend(!0,{},h.InfinityScroll.opts),this.$element.data(),t)},setCallback:function(t,e,o){var i=h._data(this.$element[0],"events");if(i&&void 0!==i[t]){for(var s=[],n=i[t].length,a=0;a<n;a++){var l=i[t][a].namespace;l!="tools."+h.InfinityScroll.NAME&&l!=h.InfinityScroll.NAME+".tools"||(l=i[t][a].handler,s.push(void 0===o?l.call(this,e):l.call(this,e,o)))}return 1==s.length?s[0]:s}return void 0===o?e:o},build:function(){h(window).on("DOMContentLoaded.tools.infinite-scroll load.tools.infinite-scroll resize.tools.infinite-scroll scroll.tools.infinite-scroll",h.proxy(function(){var t=this.$element.children().last();this.isElementInViewport(t[0])&&this.getData()},this))},getData:function(){h.ajax({url:this.opts.url,type:"post",data:"limit="+this.opts.limit+"&offset="+this.opts.offset,success:h.proxy(function(t){""!==t?(this.opts.offset=this.opts.offset+this.opts.limit,this.$element.append(t),this.setCallback("loaded",t)):h(window).off(".tools.infinite-scroll")},this)})},hidePagination:function(){this.opts.pagination&&h(this.opts.pagination).hide()},isElementInViewport:function(t){t=t.getBoundingClientRect();return 0<=t.top&&0<=t.left&&t.bottom<=h(window).height()+this.opts.tolerance&&t.right<=h(window).width()}},h(window).on("load.tools.infinity-scroll",function(){h('[data-tools="infinity-scroll"]').infinityScroll()}),o.prototype.init.prototype=o.prototype}(jQuery),function(h){function o(t,e){return new o.prototype.init(t,e)}h.fn.livesearch=function(t){return this.each(function(){h.data(this,"livesearch",{}),h.data(this,"livesearch",o(this,t))})},h.Livesearch=o,h.Livesearch.NAME="livesearch",h.Livesearch.VERSION="1.0",h.Livesearch.opts={url:!1,target:!1,min:2,params:!1,appendForms:!1},o.fn=h.Livesearch.prototype={init:function(t,e){this.$element=!1!==t&&h(t),this.loadOptions(e),this.build()},loadOptions:function(t){this.opts=h.extend({},h.extend(!0,{},h.Livesearch.opts),this.$element.data(),t)},setCallback:function(t,e,o){var i=h._data(this.$element[0],"events");if(i&&void 0!==i[t]){for(var s=[],n=i[t].length,a=0;a<n;a++){var l=i[t][a].namespace;l!="tools."+h.Livesearch.NAME&&l!=h.Livesearch.NAME+".tools"||(l=i[t][a].handler,s.push(void 0===o?l.call(this,e):l.call(this,e,o)))}return 1==s.length?s[0]:s}return void 0===o?e:o},build:function(){this.$box=h('<span class="livesearch-box" />'),this.$element.after(this.$box),this.$box.append(this.$element),this.$element.off("keyup.tools.livesearch"),this.$element.on("keyup.tools.livesearch",h.proxy(this.load,this)),this.$icon=h('<span class="livesearch-icon" />'),this.$box.append(this.$icon),this.$close=h('<span class="close" />').hide(),this.$box.append(this.$close),this.$close.off("click.tools.livesearch"),this.$close.on("click.tools.livesearch",h.proxy(function(){this.search(),this.$element.val("").focus(),this.$close.hide()},this))},toggleClose:function(t){0===t?this.$close.hide():this.$close.show()},load:function(){var o,t,i,e=this.$element.val(),s="";e.length>this.opts.min&&(t="q",void 0!==this.$element.attr("name")&&(t=this.$element.attr("name")),s=this.appendForms(s+="&"+t+"="+e),o="",this.opts.params&&(this.opts.params=h.trim(this.opts.params.replace("{","").replace("}","")),t=this.opts.params.split(","),i={},h.each(t,function(t,e){e=e.split(":");i[h.trim(e[0])]=h.trim(e[1])}),o=[],h.each(i,h.proxy(function(t,e){o.push(t+"="+e)},this)),s+="&"+(o=o.join("&")))),this.toggleClose(e.length),this.search(s)},appendForms:function(o){return this.opts.appendForms&&h.each(this.opts.appendForms,function(t,e){o+="&"+h(e).serialize()}),o},search:function(t){h.ajax({url:this.opts.url,type:"post",data:t,success:h.proxy(function(t){h(this.opts.target).html(t),this.setCallback("result",t)},this)})}},h(window).on("load.tools.livesearch",function(){h('[data-tools="livesearch"]').livesearch()}),o.prototype.init.prototype=o.prototype}(jQuery),function(h){function n(t,e){return new n.prototype.init(t,e)}h.fn.message=function(o){var i=[],s=Array.prototype.slice.call(arguments,1);return"string"==typeof o?this.each(function(){var t=h.data(this,"message");if(void 0===t||!h.isFunction(t[o]))return h.error('No such method "'+o+'" for Message');var e=t[o].apply(t,s);void 0!==e&&e!==t&&i.push(e)}):this.each(function(){h.data(this,"message",{}),h.data(this,"message",n(this,o))}),0===i.length?this:1===i.length?i[0]:i},h.Message=n,h.Message.NAME="message",h.Message.VERSION="1.0",h.Message.opts={target:!1,delay:10},n.fn=h.Message.prototype={init:function(t,e){this.$element=!1!==t&&h(t),this.loadOptions(e),this.build()},loadOptions:function(t){this.opts=h.extend({},h.extend(!0,{},h.Message.opts),this.$element.data(),t)},setCallback:function(t,e,o){var i=h._data(this.$message[0],"events");if(i&&void 0!==i[t]){for(var s=[],n=i[t].length,a=0;a<n;a++){var l=i[t][a].namespace;l!="tools."+h.Message.NAME&&l!=h.Message.NAME+".tools"||(l=i[t][a].handler,s.push(void 0===o?l.call(this,e):l.call(this,e,o)))}return 1==s.length?s[0]:s}return void 0===o?e:o},build:function(){this.opts.target?(this.$message=h(this.opts.target),this.$message.data("message",""),this.$message.data("message",this),this.$element.on("click",h.proxy(this.show,this))):(this.$message=this.$element,this.show())},show:function(){this.$message.hasClass("open")?this.hide():(h(".tools-message").hide().removeClass("open"),this.$message.addClass("open").fadeIn("fast").on("click.tools.message",h.proxy(this.hide,this)),h(document).on("keyup.tools.message",h.proxy(this.hideHandler,this)),this.opts.delay&&setTimeout(h.proxy(this.hide,this),1e3*this.opts.delay),this.setCallback("opened"))},hideHandler:function(t){27==t.which&&this.hide()},hide:function(){this.$message.hasClass("open")&&(this.$message.off("click.tools.message"),h(document).off("keyup.tools.message"),this.$message.fadeOut("fast",h.proxy(function(){this.$message.removeClass("open"),this.setCallback("closed")},this)))}},n.prototype.init.prototype=n.prototype,h(function(){h('[data-tools="message"]').message()})}(jQuery),function(h){function n(t,e){return new n.prototype.init(t,e)}h.fn.modal=function(o){var i=[],s=Array.prototype.slice.call(arguments,1);return"string"==typeof o?this.each(function(){var t=h.data(this,"modal");if(void 0===t||!h.isFunction(t[o]))return h.error('No such method "'+o+'" for Modal');var e=t[o].apply(t,s);void 0!==e&&e!==t&&i.push(e)}):this.each(function(){h.data(this,"modal",{}),h.data(this,"modal",n(this,o))}),0===i.length?this:1===i.length?i[0]:i},h.Modal=n,h.Modal.NAME="modal",h.Modal.VERSION="1.0",h.Modal.opts={title:"",width:500,blur:!1},n.fn=h.Modal.prototype={init:function(t,e){this.$element=!1!==t&&h(t),this.loadOptions(e),this.$element.on("click.tools.modal",h.proxy(this.load,this))},loadOptions:function(t){this.opts=h.extend({},h.extend(!0,{},h.Modal.opts),this.$element.data(),t)},setCallback:function(t,e,o){var i=h._data(this.$element[0],"events");if(i&&void 0!==i[t]){for(var s=[],n=i[t].length,a=0;a<n;a++){var l=i[t][a].namespace;l!="tools."+h.Modal.NAME&&l!=h.Modal.NAME+".tools"||(l=i[t][a].handler,s.push(void 0===o?l.call(this,e):l.call(this,e,o)))}return 1==s.length?s[0]:s}return void 0===o?e:o},load:function(){this.build(),this.enableEvents(),this.setTitle(),this.setDraggable(),this.setContent()},build:function(){this.buildOverlay(),this.$modalBox=h('<div class="modal-box" />').hide(),this.$modal=h('<div class="modal" />'),this.$modalHeader=h("<header />"),this.$modalClose=h('<span class="modal-close" />').html("&times;"),this.$modalBody=h("<section />"),this.$modalFooter=h("<footer />"),this.$modal.append(this.$modalHeader),this.$modal.append(this.$modalClose),this.$modal.append(this.$modalBody),this.$modal.append(this.$modalFooter),this.$modalBox.append(this.$modal),this.$modalBox.appendTo(document.body)},buildOverlay:function(){this.$modalOverlay=h('<div id="modal-overlay">').hide(),h("body").prepend(this.$modalOverlay),this.opts.blur&&(this.blurredElements=h("body").children("div, section, header, article, pre, aside, table").not(".modal, .modal-box, #modal-overlay"),this.blurredElements.addClass("modal-blur"))},show:function(){this.setCallback("loading",this.$modal),this.bodyOveflow=h(document.body).css("overflow"),h(document.body).css("overflow","hidden"),this.isMobile()?this.showOnMobile():this.showOnDesktop(),this.$modalOverlay.show(),this.$modalBox.show(),this.setButtonsWidth(),this.isMobile()||(setTimeout(h.proxy(this.showOnDesktop,this),0),h(window).on("resize.tools.modal",h.proxy(this.resize,this))),this.setCallback("opened",this.$modal),h(document).off("focusin.modal")},showOnDesktop:function(){var t=this.$modal.outerHeight(),e=h(window).height(),o=h(window).width();this.opts.width>o?this.$modal.css({width:"96%",marginTop:e/2-t/2+"px"}):e<t?this.$modal.css({width:this.opts.width+"px",marginTop:"20px"}):this.$modal.css({width:this.opts.width+"px",marginTop:e/2-t/2+"px"})},showOnMobile:function(){this.$modal.css({width:"96%",marginTop:"2%"})},resize:function(){this.isMobile()?this.showOnMobile():this.showOnDesktop()},setTitle:function(){this.$modalHeader.html(this.opts.title)},setContent:function(){"object"==typeof this.opts.content||0===this.opts.content.search("#")?(this.type="html",this.$modalBody.html(h(this.opts.content).html()),this.show()):h.ajax({url:this.opts.content,cache:!1,success:h.proxy(function(t){this.$modalBody.html(t),this.show()},this)})},setDraggable:function(){void 0!==h.fn.draggable&&(this.$modal.draggable({handle:this.$modalHeader}),this.$modalHeader.css("cursor","move"))},createCancelButton:function(t){void 0===t&&(t="Cancel");t=h("<button>").addClass("btn modal-close-btn").html(t);t.on("click",h.proxy(this.close,this)),this.$modalFooter.append(t)},createDeleteButton:function(t){return this.createButton(t=void 0===t?"Delete":t,"red")},createActionButton:function(t){return this.createButton(t=void 0===t?"Ok":t,"blue")},createButton:function(t,e){t=h("<button>").addClass("btn").addClass("btn-"+e).html(t);return this.$modalFooter.append(t),t},setButtonsWidth:function(){var t=this.$modalFooter.find("button"),e=t.size();0!==e&&t.css("width",100/e+"%")},enableEvents:function(){this.$modalClose.on("click.tools.modal",h.proxy(this.close,this)),h(document).on("keyup.tools.modal",h.proxy(this.closeHandler,this)),this.$modalBox.on("click.tools.modal",h.proxy(this.close,this))},disableEvents:function(){this.$modalClose.off("click.tools.modal"),h(document).off("keyup.tools.modal"),this.$modalBox.off("click.tools.modal"),h(window).off("resize.tools.modal")},closeHandler:function(t){27==t.which&&this.close()},close:function(t){if(t){if(!h(t.target).hasClass("modal-close-btn")&&t.target!=this.$modalClose[0]&&t.target!=this.$modalBox[0])return;t.preventDefault()}this.$modalBox&&(this.disableEvents(),this.$modalOverlay.remove(),this.$modalBox.fadeOut("fast",h.proxy(function(){this.$modalBox.remove(),h(document.body).css("overflow",this.bodyOveflow),this.opts.blur&&void 0!==this.blurredElements&&this.blurredElements.removeClass("modal-blur"),this.setCallback("closed")},this)))},isMobile:function(){return!!window.matchMedia("(max-width: 767px)").matches}},h(window).on("load.tools.modal",function(){h('[data-tools="modal"]').modal()}),n.prototype.init.prototype=n.prototype}(jQuery),function(h){function o(t,e){return new o.prototype.init(t,e)}h.fn.navigationFixed=function(t){return this.each(function(){h.data(this,"navigationFixed",{}),h.data(this,"navigationFixed",o(this,t))})},h.NavigationFixed=o,h.NavigationFixed.NAME="navigation-fixed",h.NavigationFixed.VERSION="1.0",h.NavigationFixed.opts={},o.fn=h.NavigationFixed.prototype={init:function(t,e){window.matchMedia("(max-width: 767px)").matches||(this.$element=!1!==t&&h(t),this.loadOptions(e),this.navBoxOffsetTop=this.$element.offset().top,this.build(),h(window).scroll(h.proxy(this.build,this)))},loadOptions:function(t){this.opts=h.extend({},h.extend(!0,{},h.NavigationFixed.opts),this.$element.data(),t)},setCallback:function(t,e,o){var i=h._data(this.$element[0],"events");if(i&&void 0!==i[t]){for(var s=[],n=i[t].length,a=0;a<n;a++){var l=i[t][a].namespace;l!="tools."+h.NavigationFixed.NAME&&l!=h.NavigationFixed.NAME+".tools"||(l=i[t][a].handler,s.push(void 0===o?l.call(this,e):l.call(this,e,o)))}return 1==s.length?s[0]:s}return void 0===o?e:o},build:function(){h(window).scrollTop()>this.navBoxOffsetTop?(this.$element.addClass("navigation-fixed"),this.setCallback("fixed")):(this.$element.removeClass("navigation-fixed"),this.setCallback("unfixed"))}},h(window).on("load.tools.navigation-fixed",function(){h('[data-tools="navigation-fixed"]').navigationFixed()}),o.prototype.init.prototype=o.prototype}(jQuery),function(h){function o(t,e){return new o.prototype.init(t,e)}h.fn.navigationToggle=function(t){return this.each(function(){h.data(this,"navigationToggle",{}),h.data(this,"navigationToggle",o(this,t))})},h.NavigationToggle=o,h.NavigationToggle.NAME="navigation-toggle",h.NavigationToggle.VERSION="1.0",h.NavigationToggle.opts={target:!1},o.fn=h.NavigationToggle.prototype={init:function(t,e){this.$element=!1!==t&&h(t),this.loadOptions(e),this.$target=h(this.opts.target),this.$toggle=this.$element.find("span"),this.$toggle.on("click",h.proxy(this.onClick,this)),this.build(),h(window).resize(h.proxy(this.build,this))},loadOptions:function(t){this.opts=h.extend({},h.extend(!0,{},h.NavigationToggle.opts),this.$element.data(),t)},setCallback:function(t,e,o){var i=h._data(this.$element[0],"events");if(i&&void 0!==i[t]){for(var s=[],n=i[t].length,a=0;a<n;a++){var l=i[t][a].namespace;l!="tools."+h.NavigationToggle.NAME&&l!=h.NavigationToggle.NAME+".tools"||(l=i[t][a].handler,s.push(void 0===o?l.call(this,e):l.call(this,e,o)))}return 1==s.length?s[0]:s}return void 0===o?e:o},build:function(){window.matchMedia("(max-width: 767px)").matches?this.$target.hasClass("navigation-target-show")||(this.$element.addClass("navigation-toggle-show").show(),this.$target.addClass("navigation-target-show").hide()):(this.$element.removeClass("navigation-toggle-show").hide(),this.$target.removeClass("navigation-target-show").show())},onClick:function(t){t.stopPropagation(),t.preventDefault(),this.isTargetHide()?(this.$element.addClass("navigation-toggle-show"),this.$target.show(),this.setCallback("show",this.$target)):(this.$element.removeClass("navigation-toggle-show"),this.$target.hide(),this.setCallback("hide",this.$target))},isTargetHide:function(){return"none"==this.$target[0].style.display}},h(window).on("load.tools.navigation-toggle",function(){h('[data-tools="navigation-toggle"]').navigationToggle()}),o.prototype.init.prototype=o.prototype}(jQuery),function(e){e.progress={show:function(){var t;0!==e("#tools-progress").length||(t=e('<div id="tools-progress"><span></span></div>').hide(),e(document.body).append(t)),e("#tools-progress").fadeIn()},update:function(t){this.show(),e("#tools-progress").find("span").css("width",t+"%")},hide:function(){e("#tools-progress").fadeOut(1500)}}}(jQuery),function(h){function n(t,e){return new n.prototype.init(t,e)}h.fn.tabs=function(o){var i=[],s=Array.prototype.slice.call(arguments,1);return"string"==typeof o?this.each(function(){var t=h.data(this,"tabs");if(void 0===t||!h.isFunction(t[o]))return h.error('No such method "'+o+'" for Tabs');var e=t[o].apply(t,s);void 0!==e&&e!==t&&i.push(e)}):this.each(function(){h.data(this,"tabs",{}),h.data(this,"tabs",n(this,o))}),0===i.length?this:1===i.length?i[0]:i},h.Tabs=n,h.Tabs.NAME="tabs",h.Tabs.VERSION="1.0",h.Tabs.opts={equals:!1,active:!1},n.fn=h.Tabs.prototype={init:function(t,e){this.$element=!1!==t&&h(t),this.loadOptions(e),this.links=this.$element.find("a"),this.tabs=[],this.links.each(h.proxy(this.load,this)),this.setEquals(),this.setCallback("init")},loadOptions:function(t){this.opts=h.extend({},h.extend(!0,{},h.Tabs.opts),this.$element.data(),t)},setCallback:function(t,e,o){var i=h._data(this.$element[0],"events");if(i&&void 0!==i[t]){for(var s=[],n=i[t].length,a=0;a<n;a++){var l=i[t][a].namespace;l!="tools."+h.Tabs.NAME&&l!=h.Tabs.NAME+".tools"||(l=i[t][a].handler,s.push(void 0===o?l.call(this,e):l.call(this,e,o)))}return 1==s.length?s[0]:s}return void 0===o?e:o},load:function(t,e){var o=h(e),e=o.attr("href");o.attr("rel",e),this.tabs.push(h(e)),o.parent().hasClass("active")||h(e).hide(),this.readLocationHash(e),!1!==this.opts.active&&this.opts.active===e&&this.show(e),o.on("click",h.proxy(this.onClick,this))},onClick:function(t){t.preventDefault();t=h(t.target).attr("rel");top.location.hash=t,this.show(t)},readLocationHash:function(t){""!==top.location.hash&&top.location.hash==t&&(this.opts.active=top.location.hash)},setActive:function(t){this.activeHash=t,this.activeTab=h("[rel="+t+"]"),this.links.parent().removeClass("active"),this.activeTab.parent().addClass("active")},getActiveHash:function(){return this.activeHash},getActiveTab:function(){return this.activeTab},show:function(t){this.hideAll(),h(t).show(),this.setActive(t),this.setCallback("show",h("[rel="+t+"]"),t)},hideAll:function(){h.each(this.tabs,function(){h(this).hide()})},setEquals:function(){this.opts.equals&&this.setMaxHeight(this.getMaxHeight())},setMaxHeight:function(t){h.each(this.tabs,function(){h(this).css("min-height",t+"px")})},getMaxHeight:function(){var e=0;return h.each(this.tabs,function(){var t=h(this).height();e=e<t?t:e}),e}},h(window).on("load.tools.tabs",function(){h('[data-tools="tabs"]').tabs()}),n.prototype.init.prototype=n.prototype}(jQuery),function(o){function i(t,e){return new i.prototype.init(t,e)}o.fn.textfit=function(t){return this.each(function(){o.data(this,"textfit",{}),o.data(this,"textfit",i(this,t))})},o.Textfit=i,o.Textfit.NAME="textfit",o.Textfit.VERSION="1.0",o.Textfit.opts={min:"10px",max:"100px",compressor:1},i.fn=o.Textfit.prototype={init:function(t,e){this.$element=!1!==t&&o(t),this.loadOptions(e),this.$element.css("font-size",Math.max(Math.min(this.$element.width()/(10*this.opts.compressor),parseFloat(this.opts.max)),parseFloat(this.opts.min)))},loadOptions:function(t){this.opts=o.extend({},o.extend(!0,{},o.Textfit.opts),this.$element.data(),t)}},o(window).on("load.tools.textfit",function(){o('[data-tools="textfit"]').textfit()}),i.prototype.init.prototype=i.prototype}(jQuery),function(o){function i(t,e){return new i.prototype.init(t,e)}o.fn.tooltip=function(t){return this.each(function(){o.data(this,"tooltip",{}),o.data(this,"tooltip",i(this,t))})},o.Tooltip=i,o.Tooltip.NAME="tooltip",o.Tooltip.VERSION="1.0",o.Tooltip.opts={theme:!1},i.fn=o.Tooltip.prototype={init:function(t,e){this.$element=!1!==t&&o(t),this.loadOptions(e),this.$element.on("mouseover",o.proxy(this.show,this)),this.$element.on("mouseout",o.proxy(this.hide,this))},loadOptions:function(t){this.opts=o.extend({},o.extend(!0,{},o.Tooltip.opts),this.$element.data(),t)},show:function(){o(".tooltip").hide();var t=this.$element.attr("title");this.$element.data("cached-title",t),this.$element.attr("title",""),this.tooltip=o('<div class="tooltip" />').html(t).hide(),!1!==this.opts.theme&&this.tooltip.addClass("tooltip-theme-"+this.opts.theme),this.tooltip.css({top:this.$element.offset().top+this.$element.innerHeight()+"px",left:this.$element.offset().left+"px"}),o("body").append(this.tooltip),this.tooltip.show()},hide:function(){this.tooltip.fadeOut("fast",o.proxy(function(){this.tooltip.remove()},this)),this.$element.attr("title",this.$element.data("cached-title")),this.$element.data("cached-title","")}},i.prototype.init.prototype=i.prototype,o(function(){o('[data-tools="tooltip"]').tooltip()})}(jQuery),function(h){function o(t,e){return new o.prototype.init(t,e)}h.fn.upload=function(t){return this.each(function(){h.data(this,"upload",{}),h.data(this,"upload",o(this,t))})},h.Upload=o,h.Upload.NAME="upload",h.Upload.VERSION="1.0",h.Upload.opts={url:!1,placeholder:"Drop file here or ",param:"file"},o.fn=h.Upload.prototype={init:function(t,e){this.$element=!1!==t&&h(t),this.loadOptions(e),this.load()},loadOptions:function(t){this.opts=h.extend({},h.extend(!0,{},h.Upload.opts),this.$element.data(),t)},setCallback:function(t,e,o){var i=h._data(this.$element[0],"events");if(i&&void 0!==i[t]){for(var s=[],n=i[t].length,a=0;a<n;a++){var l=i[t][a].namespace;l!="tools."+h.Upload.NAME&&l!=h.Upload.NAME+".tools"||(l=i[t][a].handler,s.push(void 0===o?l.call(this,e):l.call(this,e,o)))}return 1==s.length?s[0]:s}return void 0===o?e:o},load:function(){this.$droparea=h('<div class="tools-droparea" />'),this.$placeholdler=h('<div class="tools-droparea-placeholder" />').text(this.opts.placeholder),this.$droparea.append(this.$placeholdler),this.$element.after(this.$droparea),this.$placeholdler.append(this.$element),this.$droparea.off(".tools.upload"),this.$element.off(".tools.upload"),this.$droparea.on("dragover.tools.upload",h.proxy(this.onDrag,this)),this.$droparea.on("dragleave.tools.upload",h.proxy(this.onDragLeave,this)),this.$element.on("change.tools.upload",h.proxy(function(t){t=t.originalEvent||t,this.traverseFile(this.$element[0].files[0],t)},this)),this.$droparea.on("drop.tools.upload",h.proxy(function(t){t.preventDefault(),this.$droparea.removeClass("drag-hover").addClass("drag-drop"),this.onDrop(t)},this))},onDrop:function(t){var e=(t=t.originalEvent||t).dataTransfer.files;this.traverseFile(e[0],t)},traverseFile:function(t,e){var o=window.FormData?new FormData:null;window.FormData&&o.append(this.opts.param,t),h.progress&&h.progress.show(),this.sendData(o,e)},sendData:function(t,e){var o=new XMLHttpRequest;o.open("POST",this.opts.url),o.onreadystatechange=h.proxy(function(){var t;4==o.readyState&&(t="string"==typeof(t=(t=(t=o.responseText).replace(/^\[/,"")).replace(/\]$/,""))?h.parseJSON(t):t,h.progress&&h.progress.hide(),this.$droparea.removeClass("drag-drop"),this.setCallback("success",t))},this),o.send(t)},onDrag:function(t){t.preventDefault(),this.$droparea.addClass("drag-hover")},onDragLeave:function(t){t.preventDefault(),this.$droparea.removeClass("drag-hover")}},o.prototype.init.prototype=o.prototype,h(function(){h('[data-tools="upload"]').upload()})}(jQuery);